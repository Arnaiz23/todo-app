---
import Header from "../components/Header.astro";
import TodoContainer from "../components/TodoContainer.astro";
import BaseLayout from "../layouts/BaseLayout.astro";

const user = "Adrian";
const userLogged = true;
const response = {
  data: [
    {
      id: 54,
      title: "Prueba",
      completed: 0,
      created_at: "2023-06-24T08:41:12.000Z",
      updated_at: "2023-06-24T08:41:12.000Z",
      user_id: 1,
    },
    {
      id: 55,
      title: "Prueba 1",
      completed: 1,
      created_at: "2023-06-24T08:41:15.000Z",
      updated_at: "2023-06-24T08:41:15.000Z",
      user_id: 1,
    },
    {
      id: 56,
      title: "Prueba 3",
      completed: 0,
      created_at: "2023-06-24T08:41:19.000Z",
      updated_at: "2023-06-24T08:41:19.000Z",
      user_id: 1,
    },
    {
      id: 57,
      title: "Another",
      completed: 1,
      created_at: "2023-06-24T08:41:25.000Z",
      updated_at: "2023-06-24T08:41:25.000Z",
      user_id: 1,
    },
    {
      id: 58,
      title: "Another",
      completed: 0,
      created_at: "2023-06-24T08:45:51.000Z",
      updated_at: "2023-06-24T08:45:51.000Z",
      user_id: 1,
    },
  ],
};
---

<BaseLayout>
  <Header user={user} userLogged={userLogged} />
  <main class="flex justify-center items-center grow h-auto">
    {
      userLogged ? (
        <section class="flex flex-col bg-black min-w-[40%] lg:min-w-[25rem]">
          <input
            type="text"
            name="newtodo"
            id="newtodo"
            placeholder="Write a new TODO"
            class="bg-transparent p-3 text-center outline-none text-xl text-slate-400"
          />
          <ul class="overflow-y-scroll max-h-[75vh]">
            {response.data.map((todo) => (
              <TodoContainer title={todo.title} completed={todo.completed} />
            ))}
          </ul>
          <footer class="py-2 px-4">
            <p class="text-sm">{response.data.filter(todo => todo.completed === 0).length} pending task</p>
          </footer>
        </section>
      ) : (
        <h2 class="text-3xl">Login and work with yours TODOS</h2>
      )
    }
  </main>
</BaseLayout>
